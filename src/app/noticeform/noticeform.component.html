<div class="container">
    <div class="row Mainblock__Title">
        <div class="col text-center">
            Notification Form
        </div>
    </div>
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="row Mainblock__Body">
        <div class="col">
            <div class="row">
                <div class="col-sm-12 col-md-6">
                    <div class="form-group">
                        <label>First Name <span class="req">*</span></label>
                        <input
                          type="text"
                          formControlName="firstName"
                          class="form-control"
                          [ngClass]="{ 'is-invalid': submitted && f['firstName'].errors }"
                          (input)="alphabetOnlyInput($event, 'firstName')"
                        />
                        @if (submitted && f['firstName'].errors) {
                        <div class="invalid-feedback">
                          @if (f['firstName'].errors['required']) {
                          <div class="errMsg">First Name is required</div>
                          }
                        </div>
                        }
                      </div>
                </div>
                <div class="col-sm-12 col-md-6">
                    <div class="form-group">
                        <label>Last Name <span class="req">*</span></label>
                        <input
                          type="text"
                          formControlName="lastName"
                          class="form-control"
                          [ngClass]="{ 'is-invalid': submitted && f['lastName'].errors }"
                          (input)="alphabetOnlyInput($event, 'lastName')"
                        />
                        @if (submitted && f['lastName'].errors) {
                        <div class="invalid-feedback">
                          @if (f['lastName'].errors['required']) {
                          <div class="errMsg">Last Name is required</div>
                          }
                        </div>
                        }
                      </div>
                </div>
            </div>
            <div class="row" style="height: 6px;">
                <div class="col">
                    <div class="NoBottomMargin">How would you prefer to be notified? Check the boxes below.</div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12 col-md-6">
                    <div class="form-group">
                        <input class="form-check-input" 
                            type="checkbox" 
                            value="" 
                            id="requireEmail" 
                            formControlName="requireEmail" 
                            (change)="onCheckboxChange($event, 'email')">
                        <label>Email</label>
                        <input
                        type="text"
                        formControlName="email"
                        class="form-control"
                        [ngClass]="{ 'is-invalid': submitted && f['email'].errors }"
                        />
                        @if (submitted && f['email'].errors) {
                        <div class="invalid-feedback">
                        @if (f['email'].errors['required']) {
                        <div class="errMsg">Email is required</div>
                        }
                        @if (f['email'].errors['email']) {
                        <div class="errMsg">Email is invalid</div>
                        }
                        </div>
                        }
                    </div>
                </div>

                <div class="col-sm-12 col-md-6">
                    <div class="form-group">
                        <input class="form-check-input" 
                            type="checkbox" 
                            value="" 
                            id="requirePhoneNumber" 
                            formControlName="requirePhoneNumber" 
                            (change)="onCheckboxChange($event, 'phoneNumber')">
                        <label>Phone Number</label>
                        <input
                        type="text"
                        formControlName="phoneNumber"
                        class="form-control"
                        [ngClass]="{ 'is-invalid': submitted && f['phoneNumber'].errors }"
                        (input)="numbersAndDashOnlyInput($event, 'phoneNumber')"
                        />
                        @if (submitted && f['phoneNumber'].errors) {
                        <div class="invalid-feedback">
                        @if (f['phoneNumber'].errors) {
                        <div class="errMsg">Phone Number must be in the pattern 212-555-1234.</div>
                        }
                        </div>
                        }
                    </div>
                </div>

            </div>
            
            <div class="row justify-content-center">
                <div class="col col-12 col-md-8 col-sm-10">
                    <div class="form-group">
                        <label for="Supervisor">Supervisor</label>
                        <select 
                            class="form-select" 
                            name="Supervisor" 
                            id="Supervisor" 
                            aria-describedby="supervisorHelp"
                            formControlName="supervisor">
                            <option value="0">Select One...</option>
                            @for (sup of data; track sup) {
                                <option>{{sup}}</option>
                            }
                        </select>
                        @if(dataReceived == false) {
                            <div id="supervisorLoading" class="msg">Loading supervisors...</div>
                        }
                        @if (submitted && f['supervisor'].errors) {
                            <div id="errSupervisor" class="errMsg">Supervisor is required.</div>
                        }
                        @if(dataNoError == false){
                            <div id="errSupervisorFetch" class="errMsg">There was a problem loading supervisors from API</div>
                        }
                    </div>
                </div>
            </div>

            <div class="row justify-content-center">
                <div class="col col-6 text-center">
                    <button id="FormSubmitButton">SUBMIT</button>
                </div>
            </div>



        </div>
    </div>

